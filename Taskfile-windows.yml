version: "3"

tasks:
  default:
    cmds:
      - task: test

  setup:
    cmds:
      - task: platform
      - task: game

  platform:
    deps: [game]
    cmds:
      - odin build src/main -out:bin/7DRL.exe -debug
    aliases:
      - p
    silent: true
    generates:
      - ./bin/7DRL.exe
    sources:
      - ./**/*.odin

  game:
    deps: []
    cmds:
      - odin build src/game -build-mode:dll -out:bin/game.dll -debug
    aliases:
      - g
    silent: true
    generates:
      - ./bin/game.dll
    sources:
      - ./**/*.odin
